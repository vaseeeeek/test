function buy1ClickInitialize(){var t,e,n,i,o,a,r;t=window.shop_buy1click_jquery,e=window.shop_buy1click_config,n=jQuery,o=function(e){var i={init:function(){e.addClass("buy1click-open-button_init"),e.on("click",function(){i.fetchForm()});var t=i.getForm();t&&n(t.get(0).elements).on("change",function(){i.updateDisabled()}),i.updateDisabled()},isInit:function(){return e.hasClass("buy1click-open-button_init")},getType:function(){return e.data("type")},getForm:function(){if("item"!=i.getType())return null;var n=t(e.get(0).form);return 0!==n.length?n:(n=t(),t('input[name="product_id"]').each(function(){if(t(this).val()==e.data("product_id"))return n=n.add(t(this.form)),!1}),1===n.length?n:null)},getFormProperty:function(e){var n=i.getForm();if(null==n)return null;var o=n.get(0).elements[e];return o?HTMLCollection.prototype.isPrototypeOf(o)?t(o).filter(":checked").val():o.value:null},getSkuID:function(){if("item"!=i.getType())return null;var t=i.getFormProperty("sku_id");return t||((t=e.data("sku_id"))||e.data("default_sku_id"))},getProductID:function(){if("item"!=i.getType())return null;var t=i.getFormProperty("product_id");return t||((t=e.data("product_id"))||null)},getQuantity:function(){if("item"!=i.getType())return null;var t=e.data("quantity");return t||((t=i.getFormProperty("quantity"))||1)},getFeatures:function(){var t=i.getForm();if(null==t)return null;for(var e=/^features\[(\d+)]$/,n=[],o=t.first().serializeArray(),a=0;a<o.length;a++){var r=o[a],c=e.exec(r.name);if(c){var u=c[1],s=r.value;n.push({feature_id:u,feature_value_id:s})}}return 0==n.length?null:n},getServices:function(){var e=i.getForm();if(null==e)return null;var n=t(e.get(0).elements["services[]"]);if(!n.length)return[];var o=[];return n.each(function(){if(this.checked){var n=this.value,i=t(e.get(0).elements["service_variant["+n+"]"]).val();o.push({service_id:n,service_variant_id:i})}}),o},isDisabled:function(){if(e.data("is_loading"))return!0;var t=e.data("sku_available");if(!t)return!1;var n=i.getFeatures(),o=i.getSkuID(),a=null;return n?a=n.map(function(t){return t.feature_id+":"+t.feature_value_id+";"}).join(""):o&&(a=o),!a||!t[a]},loading:function(){e.data("is_loading",!0),e.addClass("buy1click-open-button_loading"),i.updateDisabled()},loadingEnd:function(){e.data("is_loading",!1),e.removeClass("buy1click-open-button_loading"),i.updateDisabled()},updateDisabled:function(){e.prop("disabled",i.isDisabled())},fetchForm:function(){i.loading();var t=null;if("item"==i.getType()){var e=i.getSkuID(),n=i.getFeatures(),o=i.getProductID();n?t=a.fetchByItemFeatures(o,n,i.getServices(),i.getQuantity()):e?t=a.fetchByItemSkuID(e,i.getServices(),i.getQuantity()):o&&(t=a.fetchByItemProductID(o,i.getServices(),i.getQuantity()))}else t=a.fetchByCart();t.then(function(){i.loadingEnd()},function(){i.loadingEnd()})}};return i},a=i={current_fetch:null,fetch:function(n){if(null==i.current_fetch)return t.ajax({url:e.form_url,method:"post",data:n,dataType:"json",beforeSend:function(t){i.current_fetch=t}}).then(function(e){i.current_fetch=null;var n=t(e.data.html).filter(".buy1click-form"),o=r(n);return o.init(e.data.state),o.reachGoal("open_form"),e},function(){i.current_fetch=null})},fetchByItemSkuID:function(t,e,n){return i.fetch({type:"item",item:{sku_id:t,quantity:n,services:e}})},fetchByItemFeatures:function(t,e,n,o){return i.fetch({type:"item",item:{product_id:t,quantity:o,features:e,services:n}})},fetchByItemProductID:function(t,e,n){return i.fetch({type:"item",item:{product_id:t,quantity:n,services:e}})},fetchByCart:function(){return i.fetch({type:"cart"})}},r=function(n){var i={ping_interval_id:null,current_update:null,current_send:null,init:function(e){i.setState(e),t(document.body).append(n),t("html").addClass("buy1click-body"),n.on("mousedown",function(e){window.innerWidth-e.pageX>20&&0===t(e.target).closest(".buy1click-form__content").length&&0===e.button&&i.close()}),n.find(".buy1click-form__close-button").on("click",function(t){i.close()}),i.Items.init(),i.ContactInfo.init(),i.Shipping.init(),i.Payments.init(),i.Coupon.init(),i.Comment.init(),i.Policy.init(),i.Captcha.init(),i.Submit.init(),i.ping_interval_id=setInterval(function(){i.ping()},1e4),i.refresh()},getState:function(){return n.data("state")},setState:function(t){n.data("state",t)},render:function(e){n.find(".buy1click-form__content").replaceWith(t(e).find(".buy1click-form__content"))},close:function(){return t.ajax({url:e.close_form_url,method:"post",data:{state:JSON.stringify(i.getState())},dataType:"json"}).then(function(){i.destroy(),n.remove(),t("html").removeClass("buy1click-body")})},destroy:function(){clearInterval(i.ping_interval_id)},ping:function(){return t.ajax({url:e.ping_form_url,method:"post",data:{state:JSON.stringify(i.getState())},dataType:"json"})},update:function(n){if(n=n||!1,i.abortUpdate(),null==i.current_send)return t.ajax({url:e.update_form_url,method:"post",data:{state:JSON.stringify(i.getState()),external:n},dataType:"json",beforeSend:function(t){i.current_update=t}}).then(function(t){if(i.current_update=null,t.data.state){var e=i.getState();e.errors=t.data.state.errors,i.setState(e),i.Items.render(t.data.html),i.ContactInfo.render(t.data.html),i.Shipping.render(t.data.html,n),i.Payments.render(t.data.html),i.Confirmation.render(t.data.html),i.Submit.updateState()}},function(t,e,n){"abort"!=e&&(i.Shipping.loadingEnd(),i.Payments.loadingEnd(),i.Confirmation.loadingEnd(),console.error(n))})},abortUpdate:function(){null!=i.current_update&&(i.current_update.abort(),i.current_update=null)},send:function(){if(null==i.current_send){i.abortUpdate(),i.Submit.loading(),i.Submit.disable();var n=t.Deferred();return setTimeout(function(){t.ajax({url:e.send_form_url,method:"post",data:t.extend({state:JSON.stringify(i.getState())},i.Captcha.getData()),dataType:"json",beforeSend:function(t){i.current_send=t}}).then(function(t){if(t.data.redirect_url)return i.reachGoal("send_form"),window.shop_buy1step_jquery&&shop_buy1step_jquery(".buy1step-form").each(function(t,e){var n=window.shop_buy1step_jquery(e).data("buy1step");n&&n.destroyExitConfirm&&n.destroyExitConfirm()}),void(window.location=t.data.redirect_url);i.current_send=null,i.Submit.loadingEnd(),i.render(t.data.html),i.destroy(),i.init(t.data.state),i.getState().errors.confirm_channel?i.ContactConfirmation.init():i.reachGoal("send_fail_form")},function(t,e,n){i.current_send=null,i.Shipping.loadingEnd(),i.Payments.loadingEnd(),i.Confirmation.loadingEnd(),i.Submit.loadingEnd(),i.Submit.enable(),console.error(n),alert("Произошла ошибка. Попробуйте ещё раз.")}).then(n.resolve,n.reject)},0),n}},sendChannelAddress:function(n){if(null==i.current_send){var o=i.ContactConfirmation.getChannelAddressInput().val();i.abortUpdate(),i.ContactConfirmation.loading(),i.ContactConfirmation.disableButton(),setTimeout(function(){t.ajax({url:e.send_channel_address_url,method:"post",data:{state:JSON.stringify(i.getState()),channel_type:n,address:o},dataType:"json",beforeSend:function(t){i.current_send=t}}).then(function(t){i.current_send=null,i.ContactConfirmation.loadingEnd(),i.ContactConfirmation.enableButton(),i.ContactConfirmation.hideErrors(),t.errors&&0!==t.errors.length?i.ContactConfirmation.handleErrors(t.errors):(t.data&&t.data.success&&i.ContactInfo.setField(t.data.channel_type,t.data.address),i.ContactConfirmation.setCodeStep(n))},function(t,e,n){i.current_send=null,i.ContactConfirmation.loadingEnd(),i.ContactConfirmation.enableButton(),i.ContactConfirmation.hideErrors(),console.error(n),alert("Произошла ошибка. Попробуйте ещё раз.")})},0)}},sendChannelCode:function(n){if(null==i.current_send){var o=i.ContactConfirmation.getCodeInput().val();""!==o.trim()?(i.abortUpdate(),i.ContactConfirmation.loading(),i.ContactConfirmation.disableButton(),setTimeout(function(){t.ajax({url:e.send_channel_code_url,method:"post",data:{state:JSON.stringify(i.getState()),channel_type:n,code:o},dataType:"json",beforeSend:function(t){i.current_send=t}}).then(function(t){if(i.current_send=null,i.ContactConfirmation.hideErrors(),t.errors&&0!==t.errors.length)return i.ContactConfirmation.loadingEnd(),i.ContactConfirmation.enableButton(),void i.ContactConfirmation.handleErrors(t.errors);i.send()},function(t,e,n){i.current_send=null,i.ContactConfirmation.loadingEnd(),i.ContactConfirmation.enableButton(),i.ContactConfirmation.hideErrors(),console.error(n),alert("Произошла ошибка. Попробуйте ещё раз.")})},0)):i.ContactConfirmation.handleErrors([{id:"empty_code_error",text:"Чтобы завершить оформление заказа, введите проверочный код."}])}},refresh:function(){n.find("input:text:not(.buy1click-input-text)").addClass("buy1click-input-text"),n.find("select:not(.buy1click-select)").addClass("buy1click-select"),n.find("select.buy1click-select, :checkbox.buy1click-checkbox").styler(),n.find("select.buy1click-select, :checkbox.buy1click-checkbox").each(function(){var e=t(this);setTimeout(function(){e.trigger("refresh")},0)}),n.find(":checkbox.buy1click-checkbox").off("refresh.styler").on("refresh.styler",function(){t(this).closest(".jq-checkbox").find(".jq-checkbox__div").html('<svg class="buy1click-svg-icon buy1click-checkbox__icon" width="12" height="9"><use class="buy1click-svg-icon__content" xlink:href="#buy1click-icon_checkbox-arrow" fill="#F2994A" /></svg>')}),n.find("select.buy1click-select").off("refresh.styler").on("refresh.styler",function(){t(this).closest(".jq-selectbox").find(".jq-selectbox__trigger").html('<svg class="buy1click-svg-icon" width="8" height="5"><use class="buy1click-svg-icon__content" xlink:href="#buy1click-icon_arrow" fill="#333333" /></svg>')})},reachGoal:function(t){var e=i.getState().settings,n=e.form_target_ym_counter;if(n){var o=window["yaCounter"+n],a=e["form_target_ym_"+t];o&&a&&o.reachGoal(a)}var r=e["form_target_ga_category_"+t],c=e["form_target_ga_action_"+t],u=null;if(window.gtag)u=window.gtag;else if(window.getEcommercePluginInstance){var s=getEcommercePluginInstance();s&&s._google_enhanced_ecommerce&&(u=s._google_enhanced_ecommerce._pushToDataLayer)}u&&(c||r)&&u("event",c,{event_category:r})},Items:{is_updated:!1,init:function(){i.Items.is_updated=!1,n.find(".buy1click-item-quantity").each(function(){var e=null,n=t(this),o=i.Items.getItemID(n),a=n.find(".buy1click-item-quantity__input");n.find(".buy1click-item-quantity__minus").on("click",function(){var t=i.Items.getQuantity(o);t=Math.max(1,+t-1),i.Items.setQuantity(o,t),a.val(t),i.abortUpdate(),clearTimeout(e),e=setTimeout(function(){a.trigger("change")},500)}),n.find(".buy1click-item-quantity__plus").on("click",function(){var t=i.Items.getQuantity(o);t=+t+1,i.Items.setQuantity(o,t),a.val(t),i.abortUpdate(),clearTimeout(e),e=setTimeout(function(){a.trigger("change")},500)}),a.on("change",function(){clearTimeout(e);var t=parseInt(a.val())||1;i.Items.setQuantity(o,t),a.val(t),i.Items.is_updated=!0,i.Shipping.is_updated=!0,i.Shipping.loading(),i.Payments.loading(),i.Confirmation.loading(),i.update()})}),n.toggleClass("buy1click-form_min-total-error",i.Items.isMinTotalError()),n.toggleClass("buy1click-form_available-error",i.Items.isAvailableError())},render:function(e){i.Items.is_updated&&(n.find(".buy1click-form__items").replaceWith(t(e).find(".buy1click-form__items")),i.Items.init())},getItems:function(){return i.getState().cart.items},setItems:function(t){var e=i.getState();e.cart.items=t,i.setState(e)},isMinTotalError:function(){return!!i.getState().errors.min_order},isAvailableError:function(){return!!i.getState().errors.available},getItemID:function(t){return t.closest(".buy1click-item").data("item_id")},getItem:function(t){var e=i.Items.getItems();return e[t]?e[t]:null},setItem:function(t,e){var n=i.Items.getItems();n[t]=e,i.Items.setItems(n)},getQuantity:function(t){var e=i.Items.getItem(t);return e?e.quantity:null},setQuantity:function(t,e){var n=i.Items.getItem(t);null!=n&&(n.quantity=e,i.Items.setItem(t,n))}},ContactInfo:{is_updated:!1,is_change_country:!1,init:function(){i.ContactInfo.is_updated=!1,n.find(".buy1click-form__contact-info").find(".buy1click-input-text, select.buy1click-select").on("change",function(e){var o=t(e.target),a=o.closest(".buy1click-form-field").data("field_id");setTimeout(function(){var t=o.val();i.ContactInfo.setField(a,t),0===a.indexOf("address_")&&("address_country"==a&&(i.ContactInfo.is_change_country=!0),"address_city"==a&&("москва"==t.toLowerCase()&&n.find(".buy1click-region-field select").val(77).trigger("refresh").trigger("change"),"санкт-петербург"==t.toLowerCase()&&n.find(".buy1click-region-field select").val(78).trigger("refresh").trigger("change")),i.Shipping.is_updated=!0,i.Shipping.loading(),i.Payments.loading(),i.Confirmation.loading(),i.update())},0)}),n.find(".buy1click-form-field_masked").each(function(){var e=t(this),n=e.data("mask");if(n){var i=e.find("input"),o=i.val();if(o){var a=n.replace(/\D/g,""),r=new RegExp("^"+a),c=o.replace(r,"");i.val(c)}e.find(".buy1click-form-field__input").inputmask(n+"",{definitions:{"#":{validator:"[0-9]"}},clearIncomplete:!0})}})},render:function(e){if(!i.ContactInfo.is_updated){if(!i.ContactInfo.is_change_country)return;return i.ContactInfo.is_change_country=!1,n.find(".buy1click-region-field").replaceWith(t(e).find(".buy1click-region-field")),void i.ContactInfo.init()}n.find(".buy1click-form__contact-info").replaceWith(t(e).find(".buy1click-form__contact-info")),i.ContactInfo.init(),i.refresh()},renderRegion:function(e){n.find(".buy1click-region-field").replaceWith(t(e).find(".buy1click-region-field")),i.ContactInfo.init()},getField:function(t){var e=i.getState();return 0===t.indexOf("address_")?(t=t.replace(/^address_/,""),e.contact_info.shipping_address[t]):e.contact_info[t]?e.contact_info[t]:null},setField:function(t,e){var n=i.getState();0===t.indexOf("address_")?(t=t.replace(/^address_/,""),n.contact_info.shipping_address[t]=e):n.contact_info[t]=e,i.setState(n)}},Shipping:{is_updated:!1,init:function(e){e=e||!1,i.Shipping.is_updated=!1,i.Shipping.updateChecked(),n.find(".buy1click-form__shipping :radio").on("change",function(){i.Shipping.updateChecked(),i.Payments.loading(),i.Confirmation.loading(),i.update(!0)}),n.find(".buy1click-shipping").on("click",function(e){t(e.target).closest(".jq-selectbox").length&&e.preventDefault()}),n.find("select.buy1click-shipping__rates").on("change",function(){var e=t(this).closest(".buy1click-shipping");e.data("shipping_id")!=i.Shipping.getSelectedShippingID()?e.find(":radio").prop("checked",!0).trigger("change"):(i.Shipping.updateChecked(),i.Confirmation.loading(),i.update(!0))}),n.find(".buy1click-shipping__custom-fields").on("change",function(){var e=t(this),n=t("<form/>").append(e.clone()).serializeArray().reduce(function(t,e){var n=e.name.replace(/^params\[(.*)]$/,"$1"),i=n.split(".");return 2==i.length?(t[i[0]]=t[i[0]]||{},t[i[0]][i[1]]=e.value):t[n]=e.value,t},{});i.Shipping.setShippingParams(n)}),e?i.Confirmation.loading():i.Shipping.is_updated=!0,i.update(!0)},render:function(e,o){i.Shipping.is_updated&&(n.find(".buy1click-form__shipping").replaceWith(t(e).find(".buy1click-form__shipping")),i.Shipping.init(o),i.refresh())},loading:function(){n.find(".buy1click-form__shipping").addClass("buy1click-form__shipping_loading")},loadingEnd:function(){n.find(".buy1click-form__shipping").removeClass("buy1click-form__shipping_loading")},getSelectedShippingID:function(){return i.getState().session.selected_shipping_id},setSelectedShippingID:function(t){var e=i.getState();e.session.selected_shipping_id=t,i.setState(e)},getSelectedShippingRateID:function(){return i.getState().session.selected_shipping_rate_id},setSelectedShippingRateID:function(t){var e=i.getState();e.session.selected_shipping_rate_id=t,i.setState(e)},getShippingParams:function(){return i.getState().session.shipping_params},setShippingParams:function(t){var e=i.getState();e.session.shipping_params=t,i.setState(e)},updateChecked:function(){n.find(".buy1click-shipping_checked").removeClass("buy1click-shipping_checked");var e=n.find(".buy1click-form__shipping :radio:checked").closest(".buy1click-shipping");e.addClass("buy1click-shipping_checked"),i.Shipping.setSelectedShippingID(e.data("shipping_id"));var o=e.find("select.buy1click-shipping__rates :selected");i.Shipping.setSelectedShippingRateID(o.data("rate_id"));var a=i.getState().settings;n.find(".buy1click-shipping").each(function(){var e=t(this),n=e.find("select.buy1click-shipping__rates :selected"),i="1"==a.ignore_shipping_rate_in_total?"":n.data("rate"),o="1"==a.ignore_shipping_rate_in_total?"":n.data("compare_rate");e.find(".buy1click-shipping__rate").html(i).toggleClass("buy1click-shipping__rate_empty",!i),e.find(".buy1click-shipping__compare-rate").html(o).toggleClass("buy1click-shipping__compare-rate_empty",!o),e.find(".buy1click-shipping__est-delivery").html(n.data("est_delivery")).toggleClass("buy1click-shipping__est-delivery_empty",!n.data("est_delivery")),e.find(".buy1click-shipping__comment").html(n.data("comment")).toggleClass("buy1click-shipping__comment_empty",!n.data("comment"))})},isSelectedError:function(){var t=i.getState();return"disabled"!==t.settings.form_shipping&&!t.settings.form_shipping_allow_checkout_without_shipping&&!i.Shipping.getSelectedShippingID()}},Payments:{init:function(){i.Payments.updateChecked(),n.find(".buy1click-form__payments :radio").on("change",function(){i.Payments.updateChecked(),e.is_increase_plugin_enabled&&(i.Confirmation.loading(),i.update(!0))})},render:function(e){n.find(".buy1click-form__payments").replaceWith(t(e).find(".buy1click-form__payments")),i.Payments.init()},loading:function(){n.find(".buy1click-form__payments").addClass("buy1click-form__payments_loading")},loadingEnd:function(){n.find(".buy1click-form__payments").removeClass("buy1click-form__payments_loading")},getSelectedPaymentID:function(){return i.getState().session.selected_payment_id},setSelectedPaymentID:function(t){var e=i.getState();e.session.selected_payment_id=t,i.setState(e)},updateChecked:function(){n.find(".buy1click-payment_checked").removeClass("buy1click-payment_checked");var t=n.find(".buy1click-form__payments :radio:checked").closest(".buy1click-payment");t.addClass("buy1click-payment_checked"),i.Payments.setSelectedPaymentID(t.data("payment_id"))}},Confirmation:{loading:function(){n.find(".buy1click-form__total-box").addClass("buy1click-form__total-box_loading")},loadingEnd:function(){n.find(".buy1click-form__total-box").removeClass("buy1click-form__total-box_loading")},render:function(e){n.find(".buy1click-form__total-box").replaceWith(t(e).find(".buy1click-form__total-box"))}},Coupon:{init:function(){n.find(".buy1click-form__coupon").on("change",function(){var e=t(this);i.Coupon.setCoupon(e.val()),i.Shipping.is_updated=!0,i.Shipping.loading(),i.Payments.loading(),i.Confirmation.loading(),i.update()})},getCoupon:function(){return i.getState().session.coupon},setCoupon:function(t){var e=i.getState();e.session.coupon=t,i.setState(e)}},Comment:{init:function(){n.find(".buy1click-form__comment-input").on("change",function(){var e=t(this);i.Comment.setComment(e.val())})},getComment:function(){return i.getState().session.comment},setComment:function(t){var e=i.getState();e.session.comment=t,i.setState(e)}},Policy:{init:function(){n.find(".buy1click-form__policy :checkbox").on("change",function(t){i.Policy.setChecked(t.target.checked),i.Submit.updateState()})},getChecked:function(){return i.getState().session.is_checked_policy},setChecked:function(t){var e=i.getState();e.session.is_checked_policy=t,i.setState(e)}},Captcha:{init:function(){window.onloadWaRecaptchaCallback&&window.onloadWaRecaptchaCallback()},getData:function(){var e={};return n.find(".buy1click-form__captcha input, .buy1click-form__captcha textarea").each(function(){var n=t(this);e[n.attr("name")]=n.val()}),e}},Submit:{init:function(){i.Submit.updateState(),n.find(".buy1click-form__submit-button").on("click",function(){i.send()})},loading:function(){n.find(".buy1click-form__submit-button").addClass("buy1click-form-button_loading")},loadingEnd:function(){n.find(".buy1click-form__submit-button").removeClass("buy1click-form-button_loading")},getButton:function(){return n.find(".buy1click-form__submit-button")},updateState:function(){!i.Policy.getChecked()||i.Items.isMinTotalError()||i.Items.isAvailableError()||i.Shipping.isSelectedError()?i.Submit.disable():i.Submit.enable()},disable:function(){i.Submit.getButton().prop("disabled",!0)},enable:function(){i.Submit.getButton().prop("disabled",!1)}},ContactConfirmation:{step:"",init:function(){i.ContactConfirmation.setAddressStep(i.ContactConfirmation.getChannelType())},initResendCode:function(t){i.ContactConfirmation.getReSendCodeLink().off("click").on("click",function(e){e.preventDefault(),i.sendChannelAddress(t)})},setAddressStep:function(t){i.step="address",n.toggleClass("buy1click-form_step-address",!0),n.toggleClass("buy1click-form_step-code",!1),i.ContactConfirmation.getChannelAddressInput().prop("readonly",!1),i.ContactConfirmation.getButton().off("click").on("click",function(){i.sendChannelAddress(t)}),i.ContactConfirmation.getButton().find(".buy1click-form-button-label").text("Выслать код")},setCodeStep:function(t){i.step="code",n.toggleClass("buy1click-form_step-address",!1),n.toggleClass("buy1click-form_step-code",!0),i.ContactConfirmation.getChannelAddressInput().prop("readonly",!0),i.ContactConfirmation.getCodeInput().closest(".buy1click-form-field").removeClass("buy1click-form-field_hidden"),i.ContactConfirmation.getButton().off("click").on("click",function(){i.sendChannelCode(t)}),i.ContactConfirmation.initResendCode(t);var e=i.ContactConfirmation.getIsLastChannel();i.ContactConfirmation.getButton().find(".buy1click-form-button-label").text(e?"Завершить оформление":"Готово"),i.ContactConfirmation.startReSendTimer(60)},startReSendTimer:function(t){var e=n.find(".buy1click-form__re-send-timer-wrapper"),o=e.find(".buy1click-form__re-send-timer-time"),a=i.ContactConfirmation.getReSendCodeLink();e.removeClass("buy1click-form__re-send-timer-wrapper_hidden"),a.addClass("buy1click-form__re-send-link_hidden");var r=(new Date).getTime(),c=setInterval(function(){var n=parseInt(Math.floor((r-(new Date).getTime())/1e3)+t);n>=0?o.text(function(t){if(!(t>=0))return"";var e=Math.floor(t/60),n=t-60*e;return e<10&&(e="0"+e),n<10&&(n="0"+n),e+":"+n}(n)):(clearInterval(c),e.addClass("buy1click-form__re-send-timer-wrapper_hidden"),a.removeClass("buy1click-form__re-send-link_hidden"))},100)},getButton:function(){return n.find(".buy1click-form__submit-contact-confirmation-button")},getChannelAddressInput:function(){return n.find(".buy1click-form__confirmation-channel-address")},getCodeInput:function(){return n.find(".buy1click-form__confirmation-channel-code")},getChannelType:function(){return i.getState().session.confirmation_channel_type},getIsLastChannel:function(){return i.getState().session.confirmation_channel_is_last_channel},loading:function(){n.find(".buy1click-form__submit-contact-confirmation-button").addClass("buy1click-form-button_loading")},loadingEnd:function(){n.find(".buy1click-form__submit-contact-confirmation-button").removeClass("buy1click-form-button_loading")},disableButton:function(){i.ContactConfirmation.getButton().prop("disabled",!0)},enableButton:function(){i.ContactConfirmation.getButton().prop("disabled",!1)},getReSendCodeLink:function(){return n.find(".buy1click-form__re-send-link")},handleErrors:function(t){i.ContactConfirmation.hideErrors(),t.forEach(function(t){var e="channel_error"===t.id&&"address"===i.step||"timeout_error"===t.id||"source_error"===t.id||"send_error"===t.id,o="channel_error"===t.id&&"code"===i.step||"storage_error"===t.id||"code_attempts_error"===t.id||"empty_code_error"===t.id||"code_error"===t.id,a="";if(e)a=".buy1click-form__channel-error";else{if(!o)return void console.warn(t);a=".buy1click-form__code-error"}n.find(a).text(t.text).removeClass("buy1click-form__error_hidden")})},hideErrors:function(){n.find(".buy1click-form__error").addClass("buy1click-form__error_hidden")},getCurrentChannelType:()=>i.ContactConfirmation.getChannelAddressInput().data("type")}};return i},window.shop_buy1click={Button:o,FormStorage:a,Form:r,initButtons:function(){t(".buy1click-open-button").each(function(){var e=t(this);setTimeout(function(){!function(t){var e=o(t);e.isInit()||e.init()}(e)},0)})}},function(t){t(function(){const e=window.shop_buy1click_config;var n=t("<div>");n.hide(),n.load(e.wa_url+"wa-apps/shop/plugins/buy1click/svg/icon.svg"),t("body").append(n),t(document).ajaxComplete(function(){setTimeout(function(){window.shop_buy1click.initButtons()},0)}),window.shop_buy1click.initButtons()})}(jQuery),window.buy1click_initialize=!0}