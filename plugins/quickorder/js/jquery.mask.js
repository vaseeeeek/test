/** * jquery.mask.js * @version: v1.14.15 * @author: Igor Escobar * Created by Igor Escobar on 2012-03-10. Please report any bug at github.com/igorescobar/jQuery-Mask-Plugin * Copyright (c) 2012 Igor Escobar http://igorescobar.com */!function(t,a,e){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(a||e)}(function(i){"use strict";var c=function(d,b,w){var C={invalid:[],getCaret:function(){try{var t,a=0,e=d.get(0),n=document.selection,r=e.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=n.createRange()).moveStart("character",-C.val().length),a=t.text.length):(r||"0"===r)&&(a=r),a}catch(t){}},setCaret:function(t){try{if(d.is(":focus")){var a,e=d.get(0);e.setSelectionRange?e.setSelectionRange(t,t):((a=e.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(t){}},events:function(){d.on("keydown.mask",function(t){d.data("mask-keycode",t.keyCode||t.which),d.data("mask-previus-value",d.val()),d.data("mask-previus-caret-pos",C.getCaret()),C.maskDigitPosMapOld=C.maskDigitPosMap}).on(i.jMaskGlobals.useInput?"input.mask":"keyup.mask",C.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){d.keydown().keyup()},100)}).on("change.mask",function(){d.data("changed",!0)}).on("blur.mask",function(){o===C.val()||d.data("changed")||d.trigger("change"),d.data("changed",!1)}).on("blur.mask",function(){o=C.val()}).on("focus.mask",function(t){!0===w.selectOnFocus&&i(t.target).select()}).on("focusout.mask",function(){w.clearIfNotMatch&&!s.test(C.val())&&C.val("")})},getRegexMask:function(){for(var t,a,e,n,r,s,o=[],i=0;i<b.length;i++)(t=j.translation[b.charAt(i)])?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),e=t.optional,(n=t.recursive)?(o.push(b.charAt(i)),r={digit:b.charAt(i),pattern:a}):o.push(e||n?a+"?":a)):o.push(b.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return s=o.join(""),r&&(s=s.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(s)},destroyEvents:function(){d.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var a,e=d.is("input")?"val":"text";return 0<arguments.length?(d[e]()!==t&&d[e](t),a=d):a=d[e](),a},calculateCaretPosition:function(){var t=d.data("mask-previus-value")||"",a=C.getMasked(),e=C.getCaret();if(t!==a){var n=d.data("mask-previus-caret-pos")||0,r=a.length,s=t.length,o=0,i=0,c=0,l=0,u=0;for(u=e;u<r&&C.maskDigitPosMap[u];u++)i++;for(u=e-1;0<=u&&C.maskDigitPosMap[u];u--)o++;for(u=e-1;0<=u;u--)C.maskDigitPosMap[u]&&c++;for(u=n-1;0<=u;u--)C.maskDigitPosMapOld[u]&&l++;if(s<e)e=10*r;else if(e<=n&&n!==s){if(!C.maskDigitPosMapOld[e]){var k=e;e-=l-c,e-=o,C.maskDigitPosMap[e]&&(e=k)}}else n<e&&(e+=c-l,e+=i)}return e},behaviour:function(t){t=t||window.event,C.invalid=[];var a=d.data("mask-keycode");if(-1===i.inArray(a,j.byPassKeys)){var e=C.getMasked(),n=C.getCaret();return setTimeout(function(){C.setCaret(C.calculateCaretPosition())},i.jMaskGlobals.keyStrokeCompensation),C.val(e),C.setCaret(n),C.callbacks(t)}},getMasked:function(t,a){var e,n,r,s=[],o=void 0===a?C.val():a+"",i=0,c=b.length,l=0,u=o.length,k=1,d="push",f=-1,v=0,h=[];for(w.reverse?(d="unshift",k=-1,e=0,i=c-1,l=u-1,n=function(){return-1<i&&-1<l}):(e=c-1,n=function(){return i<c&&l<u});n();){var p=b.charAt(i),g=o.charAt(l),m=j.translation[p];m?(g.match(m.pattern)?(s[d](g),m.recursive&&(-1===f?f=i:i===e&&i!==f&&(i=f-k),e===f&&(i-=k)),i+=k):g===r?(v--,r=void 0):m.optional?(i+=k,l-=k):m.fallback?(s[d](m.fallback),i+=k,l-=k):C.invalid.push({p:l,v:g,e:m.pattern}),l+=k):(t||s[d](p),g===p?(h.push(l),l+=k):(r=p,h.push(l+v),v++),i+=k)}var M=b.charAt(e);c!==u+1||j.translation[M]||s.push(M);var y=s.join("");return C.mapMaskdigitPositions(y,h,u),y},mapMaskdigitPositions:function(t,a,e){var n=w.reverse?t.length-e:0;C.maskDigitPosMap={};for(var r=0;r<a.length;r++)C.maskDigitPosMap[a[r]+n]=1},callbacks:function(t){var a=C.val(),e=a!==o,n=[a,t,d,w],r=function(t,a,e){"function"==typeof w[t]&&a&&w[t].apply(this,e)};r("onChange",!0===e,n),r("onKeyPress",!0===e,n),r("onComplete",a.length===b.length,n),r("onInvalid",0<C.invalid.length,[a,t,d,C.invalid,w])}};d=i(d);var s,j=this,o=C.val();b="function"==typeof b?b(C.val(),void 0,d,w):b,j.mask=b,j.options=w,j.remove=function(){var t=C.getCaret();return j.options.placeholder&&d.removeAttr("placeholder"),d.data("mask-maxlength")&&d.removeAttr("maxlength"),C.destroyEvents(),C.val(j.getCleanVal()),C.setCaret(t),d},j.getCleanVal=function(){return C.getMasked(!0)},j.getMaskedVal=function(t){return C.getMasked(!1,t)},j.init=function(t){if(t=t||!1,w=w||{},j.clearIfNotMatch=i.jMaskGlobals.clearIfNotMatch,j.byPassKeys=i.jMaskGlobals.byPassKeys,j.translation=i.extend({},i.jMaskGlobals.translation,w.translation),j=i.extend(!0,{},j,w),s=C.getRegexMask(),t)C.events(),C.val(C.getMasked());else{w.placeholder&&d.attr("placeholder",w.placeholder),d.data("quickorder-mask")&&d.attr("autocomplete","off");for(var a=0,e=!0;a<b.length;a++){var n=j.translation[b.charAt(a)];if(n&&n.recursive){e=!1;break}}e&&d.attr("maxlength",b.length).data("mask-maxlength",!0),C.destroyEvents(),C.events();var r=C.getCaret();C.val(C.getMasked()),C.setCaret(r)}},j.init(!d.is("input"))};i.maskWatchers={};var a=function(){var t=i(this),a={},e="data-mask-",n=t.attr("data-mask");if(t.attr(e+"reverse")&&(a.reverse=!0),t.attr(e+"clearifnotmatch")&&(a.clearIfNotMatch=!0),"true"===t.attr(e+"selectonfocus")&&(a.selectOnFocus=!0),l(t,n,a))return t.data("quickorder-mask",new c(this,n,a))},l=function(t,a,e){e=e||{};var n=i(t).data("quickorder-mask"),r=JSON.stringify,s=i(t).val()||i(t).text();try{return"function"==typeof a&&(a=a(s)),"object"!=typeof n||r(n.options)!==r(e)||n.mask!==a}catch(t){}};i.fn.quickorderMask=function(t,a){a=a||{};var e=this.selector,n=i.jMaskGlobals,r=n.watchInterval,s=a.watchInputs||n.watchInputs,o=function(){if(l(this,t,a))return i(this).data("quickorder-mask",new c(this,t,a))};return i(this).each(o),e&&""!==e&&s&&(clearInterval(i.maskWatchers[e]),i.maskWatchers[e]=setInterval(function(){i(document).find(e).each(o)},r)),this},i.fn.quickorderMasked=function(t){return this.data("quickorder-mask").getMaskedVal(t)},i.fn.quickorderUnmask=function(){return clearInterval(i.maskWatchers[this.selector]),delete i.maskWatchers[this.selector],this.each(function(){var t=i(this).data("quickorder-mask");t&&t.remove().removeData("quickorder-mask")})},i.fn.quickorderCleanVal=function(){return this.data("quickorder-mask").getCleanVal()},i.quickorderApplyDataMask=function(t){((t=t||i.jMaskGlobals.maskElements)instanceof i?t:i(t)).filter(i.jMaskGlobals.dataMaskAttr).each(a)};var t,e,n,r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-quickorder-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(t="input",n=document.createElement("div"),(e=(t="on"+t)in n)||(n.setAttribute(t,"return;"),e="function"==typeof n[t]),n=null,e),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};i.jMaskGlobals=i.jMaskGlobals||{},(r=i.jMaskGlobals=i.extend(!0,{},r,i.jMaskGlobals)).dataMask&&i.quickorderApplyDataMask(),setInterval(function(){i.jMaskGlobals.watchDataMask&&i.quickorderApplyDataMask()},r.watchInterval)},window.jQuery,window.Zepto);